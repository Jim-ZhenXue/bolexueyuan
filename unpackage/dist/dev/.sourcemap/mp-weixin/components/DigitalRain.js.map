{"version":3,"file":"DigitalRain.js","sources":["components/DigitalRain.vue","/Users/xz/Documents/HBuilderProjects/bolexueyuan/components/DigitalRain.vue?type=component"],"sourcesContent":["<template>\n\t<canvas \n\t\ttype=\"2d\" \n\t\tid=\"digitalRain\"\n\t\tcanvas-id=\"digitalRain\"\n\t\t:style=\"{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }\"\n\t></canvas>\n</template>\n\n<script>\nexport default {\n\tname: 'DigitalRain',\n\tdata() {\n\t\treturn {\n\t\t\tctx: null,\n\t\t\tcolumns: 0,\n\t\t\tdrops: [],\n\t\t\tcharacters: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\n\t\t\tanimationInterval: null,\n\t\t\tcanvasWidth: 0,\n\t\t\tcanvasHeight: 0\n\t\t}\n\t},\n\tmounted() {\n\t\t// 获取系统信息\n\t\tconst systemInfo = uni.getSystemInfoSync();\n\t\tthis.canvasWidth = systemInfo.windowWidth;\n\t\tthis.canvasHeight = systemInfo.windowHeight;\n\t\t\n\t\tthis.initCanvas();\n\t},\n\tbeforeDestroy() {\n\t\tif (this.animationInterval) {\n\t\t\tclearInterval(this.animationInterval);\n\t\t}\n\t},\n\tmethods: {\n\t\tasync initCanvas() {\n\t\t\ttry {\n\t\t\t\t// 获取canvas上下文\n\t\t\t\tconst query = uni.createSelectorQuery().in(this);\n\t\t\t\tquery.select('#digitalRain')\n\t\t\t\t\t.fields({ node: true, size: true })\n\t\t\t\t\t.exec((res) => {\n\t\t\t\t\t\tconst canvas = res[0].node;\n\t\t\t\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\t\t\t\t\n\t\t\t\t\t\tcanvas.width = this.canvasWidth;\n\t\t\t\t\t\tcanvas.height = this.canvasHeight;\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.ctx = ctx;\n\t\t\t\t\t\t// 减小字符间距，增加列数\n\t\t\t\t\t\tthis.columns = Math.floor(this.canvasWidth / 12) + 1;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 初始化drops数组\n\t\t\t\t\t\tthis.drops = [];\n\t\t\t\t\t\tfor (let i = 0; i < this.columns; i++) {\n\t\t\t\t\t\t\tthis.drops.push(Math.floor(Math.random() * this.canvasHeight / 12));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.startAnimation();\n\t\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Canvas initialization error:', error);\n\t\t\t}\n\t\t},\n\t\tdraw() {\n\t\t\tif (!this.ctx) return;\n\t\t\t\n\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; // 调整透明度使拖尾效果更明显\n\t\t\tthis.ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\n\t\t\t\n\t\t\tthis.ctx.fillStyle = '#0F0';\n\t\t\tthis.ctx.font = '10px monospace'; // 减小字体大小\n\t\t\t\n\t\t\tfor (let i = 0; i < this.drops.length; i++) {\n\t\t\t\tconst text = this.characters[Math.floor(Math.random() * this.characters.length)];\n\t\t\t\tconst x = i * 12; // 减小字符间距\n\t\t\t\tconst y = this.drops[i] * 12;\n\t\t\t\t\n\t\t\t\t// 根据y位置调整透明度，创造渐变效果\n\t\t\t\tconst alpha = (y / this.canvasHeight);\n\t\t\t\tthis.ctx.fillStyle = `rgba(0, 255, 0, ${alpha})`;\n\t\t\t\tthis.ctx.fillText(text, x, y);\n\t\t\t\t\n\t\t\t\tif (y >= this.canvasHeight && Math.random() > 0.95) { // 调整重置概率\n\t\t\t\t\tthis.drops[i] = 0;\n\t\t\t\t} else {\n\t\t\t\t\tthis.drops[i]++;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tstartAnimation() {\n\t\t\tthis.animationInterval = setInterval(() => {\n\t\t\t\tthis.draw();\n\t\t\t}, 50); // 调整动画速度\n\t\t}\n\t}\n}\n</script>\n\n<style>\ncanvas {\n\tbackground-color: black;\n}\n</style>\n","import Component from '/Users/xz/Documents/HBuilderProjects/bolexueyuan/components/DigitalRain.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":"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"}