{"version":3,"file":"splash.js","sources":["pages/splash/splash.vue","pages/splash/splash.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"splash-container\" @click=\"enterApp\">\n\t\t<!-- <view v-if=\"showMessage\" class=\"top-left-text\">\n\t\t\t<text class=\"char\" style=\"transform: rotate(-15deg); color: #4B0082;\">多</text>\n\t\t\t<text class=\"char\" style=\"transform: rotate(-5deg); color: #0000FF;\">元</text>\n\t\t\t<text class=\"char\" style=\"transform: rotate(5deg); color: #00FF00;\">智</text>\n\t\t\t<text class=\"char\" style=\"transform: rotate(15deg); color: #FFFF00;\">能</text>\n\t\t\t<text class=\"char\" style=\"transform: rotate(25deg); color: #FF7F00;\">思</text>\n\t\t\t<text class=\"char\" style=\"transform: rotate(-5deg); color: #FF0000;\">维</text>\n\t\t</view> -->\n\t\t<template v-if=\"showDigitalRain\">\n\t\t\t<digital-rain></digital-rain>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<image :src=\"splashImage\" mode=\"aspectFill\" class=\"splash-image\"></image>\n\t\t</template>\n\t\t<view v-if=\"showMessage\" class=\"enter-message\">＞ 点击屏幕进入 ＜</view>\n\t</view>\n</template>\n\n<script>\nimport DigitalRain from '@/components/DigitalRain.vue'\n\nexport default {\n\tcomponents: {\n\t\tDigitalRain\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsplashImage: '',\n\t\t\timages: [\n\t\t\t\t'https://www.javascriptx.fun:3000/api/image/1.jpg',\n\t\t\t\t'https://www.javascriptx.fun:3000/api/image/2.jpg',\n\t\t\t\t'https://www.javascriptx.fun:3000/api/image/3.jpg',\n\t\t\t\t'https://www.javascriptx.fun:3000/api/image/4.jpg',\n\t\t\t\t'https://www.javascriptx.fun:3000/api/image/5.jpg'\n\t\t\t],\n\t\t\tshowMessage: false,\n\t\t\tshowDigitalRain: false,\n\t\t\timageCache: new Map()\n\t\t}\n\t},\n\tonShow() {\n\t\tthis.selectRandomBackground();\n\t\tthis.preloadIndexResources();\n\t\tsetTimeout(() => {\n\t\t\tthis.showMessage = true;\n\t\t}, 3000);\n\t},\n\tmethods: {\n\t\tasync fetchImage(imageUrl) {\n\t\t\tif (this.imageCache.has(imageUrl)) {\n\t\t\t\treturn this.imageCache.get(imageUrl);\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst response = await new Promise((resolve, reject) => {\n\t\t\t\t\tuni.request({\n\t\t\t\t\t\turl: imageUrl,\n\t\t\t\t\t\tresponseType: 'arraybuffer',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tresolve(res);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!response || response.statusCode !== 200) {\n\t\t\t\t\tthrow new Error('Image not found');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst base64 = uni.arrayBufferToBase64(response.data);\n\t\t\t\tconst finalUrl = `data:image/jpeg;base64,${base64}`;\n\t\t\t\tthis.imageCache.set(imageUrl, finalUrl);\n\t\t\t\treturn finalUrl;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error fetching image:', error);\n\t\t\t\tthis.showDigitalRain = true;\n\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\tasync selectRandomBackground() {\n\t\t\t// 增加一个数字雨的概率\n\t\t\tconst useDigitalRain = Math.random() < 0.5; // 20%的概率显示数字雨\n\t\t\t\n\t\t\tif (useDigitalRain) {\n\t\t\t\tthis.showDigitalRain = true;\n\t\t\t\tthis.splashImage = '';\n\t\t\t} else {\n\t\t\t\tthis.showDigitalRain = false;\n\t\t\t\tconst randomIndex = Math.floor(Math.random() * this.images.length);\n\t\t\t\tconsole.log('Selected image index:', randomIndex);\n\t\t\t\tconst imageUrl = this.images[randomIndex];\n\t\t\t\tconst fetchedImage = await this.fetchImage(imageUrl);\n\t\t\t\tif (fetchedImage) {\n\t\t\t\t\tthis.splashImage = fetchedImage;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tpreloadIndexResources() {\n\t\t\t// Example: Preload data or resources for index.vue\n\t\t\tconsole.log('Preloading index.vue resources...');\n\t\t\t// Add actual preload logic here\n\t\t},\n\t\tenterApp() {\n\t\t\tuni.reLaunch({\n\t\t\t\turl: '/pages/index/index'\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style>\n@keyframes fadeInOut {\n\t0%, 30%, 100% { opacity: 0; }\n\t40%, 90% { opacity: 1; }\n}\n\n.splash-container {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100vh;\n}\n\n.splash-image {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.top-left-text {\n\tposition: fixed;\n\ttop: 10px;\n\tleft: 10px;\n\tz-index: 100;\n\tdisplay: flex;\n\tgap: 5px;\n\tanimation: fadeInOut 6s ease-in-out infinite;\n}\n\n.char {\n\tfont-size: 50px;\n\tfont-weight: bold;\n\ttext-shadow: 2px 2px 0 rgba(0, 0, 0, 0.8), 4px 4px 0 rgba(0, 0, 0, 0.6), 6px 6px 0 rgba(0, 0, 0, 0.4);\n\tmargin: 0 2px;\n}\n\n.enter-message {\n\tposition: fixed;\n\tbottom: 20%;\n\tleft: 0;\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n\tfont-size: 20px;\n\tfont-weight: bold;\n\ttext-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n\tz-index: 100;\n\tpadding: 10px 0;\n\tanimation: fadeInOut 6s ease-in-out infinite;\n}\n</style>","import MiniProgramPage from '/Users/xz/Documents/HBuilderProjects/bolexueyuan/pages/splash/splash.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAqBA,oBAAoB,MAAW;AAE/B,MAAK,YAAU;AAAA,EACd,YAAY;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,aAAa;AAAA,MACb,QAAQ;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACA;AAAA,MACD,aAAa;AAAA,MACb,iBAAiB;AAAA,MACjB,YAAY,oBAAI,IAAI;AAAA,IACrB;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,uBAAsB;AAC3B,SAAK,sBAAqB;AAC1B,eAAW,MAAM;AAChB,WAAK,cAAc;AAAA,IACnB,GAAE,GAAI;AAAA,EACP;AAAA,EACD,SAAS;AAAA,IACR,MAAM,WAAW,UAAU;AAC1B,UAAI,KAAK,WAAW,IAAI,QAAQ,GAAG;AAClC,eAAO,KAAK,WAAW,IAAI,QAAQ;AAAA,MACpC;AAEA,UAAI;AACH,cAAM,WAAW,MAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvDA,wBAAAA,MAAI,QAAQ;AAAA,YACX,KAAK;AAAA,YACL,cAAc;AAAA,YACd,SAAS,CAAC,QAAQ;AACjB,sBAAQ,GAAG;AAAA,YACX;AAAA,YACD,MAAM,CAAC,QAAQ;AACd,qBAAO,GAAG;AAAA,YACX;AAAA,UACD,CAAC;AAAA,QACF,CAAC;AAED,YAAI,CAAC,YAAY,SAAS,eAAe,KAAK;AAC7C,gBAAM,IAAI,MAAM,iBAAiB;AAAA,QAClC;AAEA,cAAM,SAASA,cAAG,MAAC,oBAAoB,SAAS,IAAI;AACpD,cAAM,WAAW,0BAA0B,MAAM;AACjD,aAAK,WAAW,IAAI,UAAU,QAAQ;AACtC,eAAO;AAAA,MACN,SAAO,OAAO;AACfA,sBAAA,MAAA,MAAA,SAAA,iCAAc,yBAAyB,KAAK;AAC5C,aAAK,kBAAkB;AACvB,eAAO;AAAA,MACR;AAAA,IACA;AAAA,IACD,MAAM,yBAAyB;AAE9B,YAAM,iBAAiB,KAAK,OAAM,IAAK;AAEvC,UAAI,gBAAgB;AACnB,aAAK,kBAAkB;AACvB,aAAK,cAAc;AAAA,aACb;AACN,aAAK,kBAAkB;AACvB,cAAM,cAAc,KAAK,MAAM,KAAK,OAAM,IAAK,KAAK,OAAO,MAAM;AACjEA,0EAAY,yBAAyB,WAAW;AAChD,cAAM,WAAW,KAAK,OAAO,WAAW;AACxC,cAAM,eAAe,MAAM,KAAK,WAAW,QAAQ;AACnD,YAAI,cAAc;AACjB,eAAK,cAAc;AAAA,QACpB;AAAA,MACD;AAAA,IACA;AAAA,IACD,wBAAwB;AAEvBA,oBAAAA,MAAA,MAAA,OAAA,kCAAY,mCAAmC;AAAA,IAE/C;AAAA,IACD,WAAW;AACVA,oBAAAA,MAAI,SAAS;AAAA,QACZ,KAAK;AAAA,MACN,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;AC/GA,GAAG,WAAW,eAAe;"}